<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ketcher</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #ketcher-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
    <!-- Ketcher dependencies -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@epam/ketcher/dist/ketcher.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@epam/ketcher/dist/ketcher.css">
</head>
<body>
    <div id="ketcher-container"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Ketcher
            const ketcherWindow = window.ketcher;
            
            // Create the editor
            ketcherWindow.editor.init(document.getElementById('ketcher-container'));
            
            // Handle messages from React Native
            window.addEventListener('message', function(event) {
                const message = JSON.parse(event.data);
                
                if (message.type === 'getStructure') {
                    // Get the current structure and send it back to React Native
                    const structure = ketcherWindow.editor.getStructure();
                    window.ReactNativeWebView.postMessage(JSON.stringify({
                        type: 'structure',
                        data: structure
                    }));
                } else if (message.type === 'setStructure') {
                    // Set a new structure in the editor
                    ketcherWindow.editor.setStructure(message.data);
                }
            });
            
            // Notify React Native that Ketcher is ready
            if (window.ReactNativeWebView) {
                window.ReactNativeWebView.postMessage(JSON.stringify({
                    type: 'ready'
                }));
            }
        });
    </script>
</body>
</html>
